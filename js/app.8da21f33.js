(function(e){function t(t){for(var r,a,o=t[0],u=t[1],c=t[2],l=0,d=[];l<o.length;l++)a=o[l],s[a]&&d.push(s[a][0]),s[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);m&&m(t);while(d.length)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,a=1;a<n.length;a++){var o=n[a];0!==s[o]&&(r=!1)}r&&(i.splice(t--,1),e=u(u.s=n[0]))}return e}var r={},a={app:0},s={app:0},i=[];function o(e){return u.p+"js/"+({}[e]||e)+"."+{"chunk-04db8ee8":"ba49f3bd","chunk-18b439ec":"a72887fa","chunk-1e6f9180":"d86bb96a","chunk-2d0e48a1":"28d7ef92","chunk-7b34cbf8":"db06981a"}[e]+".js"}function u(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(e){var t=[],n={"chunk-04db8ee8":1,"chunk-18b439ec":1,"chunk-1e6f9180":1,"chunk-7b34cbf8":1};a[e]?t.push(a[e]):0!==a[e]&&n[e]&&t.push(a[e]=new Promise(function(t,n){for(var r="css/"+({}[e]||e)+"."+{"chunk-04db8ee8":"2d65ffa2","chunk-18b439ec":"a0219a2d","chunk-1e6f9180":"7a2a7be5","chunk-2d0e48a1":"31d6cfe0","chunk-7b34cbf8":"65a4941c"}[e]+".css",s=u.p+r,i=document.getElementsByTagName("link"),o=0;o<i.length;o++){var c=i[o],l=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(l===r||l===s))return t()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){c=d[o],l=c.getAttribute("data-href");if(l===r||l===s)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var r=t&&t.target&&t.target.src||s,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.request=r,delete a[e],m.parentNode.removeChild(m),n(i)},m.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(m)}).then(function(){a[e]=0}));var r=s[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise(function(t,n){r=s[e]=[t,n]});t.push(r[2]=i);var c,l=document.createElement("script");l.charset="utf-8",l.timeout=120,u.nc&&l.setAttribute("nonce",u.nc),l.src=o(e),c=function(t){l.onerror=l.onload=null,clearTimeout(d);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src,i=new Error("Loading chunk "+e+" failed.\n("+r+": "+a+")");i.type=r,i.request=a,n[1](i)}s[e]=void 0}};var d=setTimeout(function(){c({type:"timeout",target:l})},12e4);l.onerror=l.onload=c,document.head.appendChild(l)}return Promise.all(t)},u.m=e,u.c=r,u.d=function(e,t,n){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)u.d(n,r,function(t){return e[t]}.bind(null,r));return n},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/MyTopPlaylist/",u.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var m=l;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"02f6":function(e,t,n){"use strict";var r=n("8d72"),a=n.n(r);a.a},"0475":function(e,t,n){},"06e0":function(e,t,n){e.exports=n.p+"img/logo32.8eed93fc.png"},"0978":function(e,t,n){"use strict";var r=n("ca38"),a=n.n(r);a.a},1718:function(e,t,n){},"1afa":function(e,t,n){},2612:function(e,t,n){"use strict";n.d(t,"c",function(){return a}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var r=n("b775"),a=function(e){var t=e.page,n=e.limit,a=e.orderColumn,s=void 0===a?"":a,i=e.orderType,o=void 0===i?"":i;return Object(r["a"])({url:"/api/users",method:"get",params:{limit:n,page:t,orderColumn:s,orderType:o}})},s=function(e){var t=e.userId;return Object(r["a"])({url:"/api/users/".concat(t),method:"delete"})},i=function(e){var t=e.userId,n=e.roles;return Object(r["a"])({url:"/api/users/".concat(t),method:"put",params:{roles:n}})}},"36de":function(e,t,n){"use strict";var r=n("45da"),a=n.n(r);a.a},4218:function(e,t,n){"use strict";var r=n("42ff"),a=n.n(r);a.a},"42ff":function(e,t,n){},4360:function(e,t,n){"use strict";n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("2f62"),s=function(){return{isAdmin:!1,isModer:!1,isLogged:!1,userInfo:null,token:null,loading:!1,roles:[]}},i={isLogged:function(e){return e.isLogged},userInfo:function(e){return e.userInfo},loading:function(e){return e.loading},token:function(e){return e.token},isAdmin:function(e){return e.isAdmin},isModer:function(e){return e.isModer},roles:function(e){return e.roles}},o=n("cebc"),u=(n("6762"),n("2fdb"),{SET_TOKEN:function(e,t){var n=t.token;e.token=n},SET_LOGIN:function(e,t){e.isLogged=t},SET_ROLES:function(e,t){e.roles=t,e.isAdmin=t.includes("ROLE_ADMIN"),e.isModer=t.includes("ROLE_MODER")},SET_USER_INFO:function(e,t){e.userInfo=t},SET_LOADING:function(e,t){e.loading=t},UPDATE_USER_INFO:function(e,t){e.userInfo=Object(o["a"])({},e.userInfo,t)}}),c=(n("7f7f"),n("96cf"),n("3b8d")),l=n("b775"),d=function(e,t){return Object(l["a"])({url:"/api/login",method:"get",params:{email:e,password:t}})},m=function(e){return Object(l["a"])({url:"/api/register",method:"post",data:e})},p=function(){return Object(l["a"])({url:"/api/current",method:"get"})},f=n("5f87"),g={loginByUsername:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.email,s=n.password,e.next=4,d(a.trim(),s);case 4:i=e.sent,r("SET_TOKEN",i.data),Object(f["c"])(i.data);case 7:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),setLogin:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:n=t.commit,n("SET_LOGIN",!0);case 2:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}(),signUp:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,e.next=3,m(n);case 3:a=e.sent,Object(f["c"])(a.data),r("SET_TOKEN",a.data);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getCurrent:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){var n,r,a,s,i,o,u,c,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.dispatch,e.prev=1,e.next=4,p();case 4:return a=e.sent,s=a.data,i=a.data,o=i.email,u=i.name,c=i.created_at,l=i.id,n("SET_ROLES",s.roles),n("SET_LOGIN",!0),n("SET_USER_INFO",{created_at:c,email:o,name:u,id:l}),e.abrupt("return",a);case 12:e.prev=12,e.t0=e["catch"](1),r("userLogout");case 15:case"end":return e.stop()}},e,null,[[1,12]])}));function t(t){return e.apply(this,arguments)}return t}(),userLogout:function(e){var t=e.commit;t("SET_TOKEN",""),t("SET_ROLES",[]),t("SET_USER_INFO",null),t("SET_LOGIN",!1),Object(f["b"])()},setTokenToStore:function(e,t){var n=e.commit;n("SET_TOKEN",t)}},h={namespaced:!0,state:s,getters:i,mutations:u,actions:g},v=n("a78e"),b=n.n(v),y={sidebar:{opened:!+b.a.get("sidebarStatus"),newItems:null},constantRoutes:[],language:b.a.get("language")||"ru",visitedViews:[],cachedViews:[]},_=n("768b"),w=(n("ac6a"),n("5d73")),x=n.n(w),k={TOGGLE_SIDEBAR:function(e){b.a.set("sidebarStatus",+!e.sidebar.opened),e.sidebar.opened=!e.sidebar.opened},SET_SIDEBAR_ITEMS:function(e,t){e.sidebar.items=t},SET_LANGUAGE:function(e,t){e.language=t,b.a.set("language",t)},ADD_VISITED_VIEWS:function(e,t){e.visitedViews.some(function(e){return e.path===t.path})||(e.visitedViews.push({name:t.name,path:t.path,title:t.meta.title||"no-name"}),t.meta.noCache||e.cachedViews.push(t.name))},DEL_VISITED_VIEWS:function(e,t){var n=!0,r=!1,a=void 0;try{for(var s,i=x()(e.visitedViews.entries());!(n=(s=i.next()).done);n=!0){var o=Object(_["a"])(s.value,2),u=o[0],c=o[1];if(c.path===t.path){e.visitedViews.splice(u,1);break}}}catch(h){r=!0,a=h}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}var l=!0,d=!1,m=void 0;try{for(var p,f=x()(e.cachedViews);!(l=(p=f.next()).done);l=!0){u=p.value;if(u===t.name){var g=e.cachedViews.indexOf(u);e.cachedViews.splice(g,1);break}}}catch(h){d=!0,m=h}finally{try{l||null==f.return||f.return()}finally{if(d)throw m}}}},O=n("75fc"),C=n("795b"),E=n.n(C),A={toggleSideBar:function(e){var t=e.commit;t("TOGGLE_SIDEBAR")},setLanguage:function(e,t){var n=e.commit;n("SET_LANGUAGE",t)},addVisitedViews:function(e,t){var n=e.commit;n("ADD_VISITED_VIEWS",t)},delVisitedViews:function(e,t){var n=e.commit,r=e.state;return new E.a(function(e){n("DEL_VISITED_VIEWS",t),e(Object(O["a"])(r.visitedViews))})}},j={namespaced:!0,state:y,mutations:k,actions:A},R=function(){return{playlistsFav:[],playlists:[]}},I={playlistsFav:function(e){return e.playlistsFav},playlists:function(e){return e.playlists}},S={SET_PLAYLISTS:function(e,t){var n=t.data,r=t.where;e[r]=n}},$=n("490b"),L={getFavPlaylists:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.userId,s=n.page,i=n.limit,e.next=4,Object($["c"])(a,s,i);case 4:o=e.sent,r("SET_PLAYLISTS",{data:o.data.data,where:"playlistsFav"});case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}(),getPlaylists:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.user,e.next=4,Object($["f"])(a);case 4:s=e.sent,r("SET_PLAYLISTS",{data:s.data.data,where:"playlists"});case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},T={namespaced:!0,state:R,getters:I,mutations:S,actions:L},D=function(){return{users:[]}},P={users:function(e){return e.users}},M={SET_USERS:function(e,t){e.users=t}},N=n("2612"),F={getUsersList:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,i,o,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.page,s=n.limit,i=n.orderType,o=n.orderColumn,e.next=4,Object(N["c"])({page:a,limit:s,orderType:i,orderColumn:o});case 4:u=e.sent,r("SET_USERS",u.data);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},U={namespaced:!0,state:D,getters:P,mutations:M,actions:F},V=function(){return{comments:[]}},B={SET_COMMENTS:function(e,t){e.comments=t}},G=function(e){var t=e.id,n=e.page,r=e.limit;return Object(l["a"])({url:"/api/comments/",method:"get",params:{playlistId:t,page:n,limit:r}})},K={getComments:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,a,s,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r=t.commit,a=n.id,s=n.page,i=n.limit,e.next=4,G({id:a,page:s,limit:i});case 4:o=e.sent,r("SET_COMMENTS",o.data);case 6:case"end":return e.stop()}},e)}));function t(t,n){return e.apply(this,arguments)}return t}()},W={comments:function(e){return e.comments}},z={namespaced:!0,state:V,mutations:B,actions:K,getters:W},q=n("9224"),J=function(){return q["a"]};r["default"].use(a["a"]);t["a"]=new a["a"].Store({modules:{app:j,user:h,playlist:T,users:U,comments:z},getters:{version:function(){return J()}}})},4503:function(e,t,n){"use strict";var r=n("a8ab"),a=n.n(r);a.a},4564:function(e,t,n){},"45da":function(e,t,n){},"490b":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"d",function(){return s}),n.d(t,"f",function(){return i}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return c}),n.d(t,"e",function(){return l}),n.d(t,"h",function(){return d});var r=n("b775"),a=function(e){return Object(r["a"])({url:"/api/playlists/".concat(e),method:"delete"})},s=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(r["a"])({url:"/api/playlists/".concat(e),method:"get",params:{userId:t}})},i=function(e){return Object(r["a"])({url:"/api/playlists",method:"get",params:{user:e}})},o=function(e){return Object(r["a"])({url:"/api/favorites",method:"post",params:{playlistId:e}})},u=function(e){return Object(r["a"])({url:"/api/favorites",method:"delete",params:{playlistId:e}})},c=function(e,t,n){return Object(r["a"])({url:"/api/favorites",method:"get",params:{userId:e,page:t,limit:n}})},l=function(e,t){return Object(r["a"])({url:"/api/playlists",method:"get",params:{orderType:e,orderColumn:t}})},d=function(e,t){return Object(r["a"])({url:"/api/playlists/".concat(e),method:"put",params:{rating:t}})}},"4e9b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("5132"),s=n.n(a),i=n("5c96"),o=n.n(i),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"app-wrapper"},[n("nav-component"),n("el-row",[n("el-col",{staticClass:"col",attrs:{span:22,offset:1}},[n("router-view")],1)],1)],1)])},c=[],l=(n("96cf"),n("3b8d")),d=function(){var e=this,t=e.$createElement,r=e._self._c||t;return"/404"!==e.$route.path?r("div",{staticClass:"header"},[r("el-menu",{staticClass:"el-menu-demo",attrs:{router:!0,"default-active":e.$route.path,mode:"horizontal"}},[r("div",{staticClass:"logo"},[r("img",{attrs:{src:n("06e0"),alt:""}}),r("h3",[r("mark",[e._v("My")]),e._v("TopMusic")])]),r("el-menu-item",{staticClass:"menu-item",attrs:{index:"/",route:"/"}},[e._v("\n      Главная\n    ")]),r("div",{staticClass:"right-menu"},[e.isLogged?e._e():r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$modal.show("LoginModal")}}},[e._v("Войти")]),e.isLogged?e._e():r("el-button",{on:{click:function(t){return e.$modal.show("RegistrationModal")}}},[e._v("Зарегистрироваться")])],1),e.isLogged?r("el-submenu",{staticClass:"submenu",attrs:{index:"2"}},[r("template",{slot:"title"},[e._v(e._s(e.userName))]),e.isLogged?r("el-menu-item",{staticClass:"submenu-item",attrs:{index:"/my-music",route:"/my-music"}},[e._v("\n        Моя музыка")]):e._e(),e.isAdmin?r("el-menu-item",{staticClass:"submenu-item",attrs:{index:"/genres",route:"/genres"}},[e._v("\n        Жанры")]):e._e(),e.isAdmin?r("el-menu-item",{staticClass:"submenu-item",attrs:{index:"/users-list",route:"/users-list"}},[e._v("\n        Список пользователей")]):e._e(),e.isLogged?r("el-menu-item",{staticClass:"submenu-item",on:{click:e.handleClick}},[e._v("\n        Выйти")]):e._e()],2):e._e()],1),r("LoginModal"),r("RegistationModal")],1):e._e()},m=[],p=(n("7f7f"),n("75fc")),f=(n("6762"),n("2fdb"),n("8c4f")),g=n("4360"),h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.$route.params.playlistId||"/my-music/create"===e.$route.path?n("router-view"):n("div",{staticClass:"my-music"},[n("h3",[e._v("Моя музыка")]),n("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"Мои плейлисты",name:"first"}},[n("MyMusic")],1),n("el-tab-pane",{attrs:{label:"Изранные плейлисты",name:"second"}},[n("FavoritesMusic")],1)],1)],1)},v=[],b={data:function(){return{activeName:"first"}},components:{MyMusic:function(){return n.e("chunk-04db8ee8").then(n.bind(null,"582f"))},FavoritesMusic:function(){return n.e("chunk-18b439ec").then(n.bind(null,"95fb"))}}},y=b,_=(n("9a08"),n("2877")),w=Object(_["a"])(y,h,v,!1,null,"4c4b6ce4",null),x=w.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return"create"!==e.$route.params.playlistId?n("div",{staticClass:"playlist"},[e.playlist.id?n("div",{staticClass:"playlist-header"},[n("div",{staticClass:"playlist-img",style:{"background-image":"url(http://symfony.dev.webant.ru/storage/"+e.playlist.image+")"}}),n("div",{staticClass:"playlist-right-side"},[n("div",{staticClass:"playlist-description"},[n("span",{staticClass:"playlist-description-type"},[e._v("Альбом")]),n("span",{staticClass:"playlist-description-genre"},[e._v(e._s(e.genre))]),n("span",{staticClass:"playlist-description-heading"},[e._v(e._s(e.playlist.name))]),n("span",{staticClass:"playlist-description-author"},[e._v("By: \n          "),n("span",{staticClass:"playlist-description-author-name"},[e._v(e._s(e.author))])]),n("rate",{attrs:{rating:e.rating}})],1),n("div",{staticClass:"playlist-buttons"},[e.isOwner?n("el-button",{staticClass:"add",attrs:{round:"",type:"primary"},on:{click:function(t){e.toggleForm=!e.toggleForm}}},[e._v("\n          Добавить песню\n        ")]):e._e(),e.isLogged&&!e.isOwner?n("like",{attrs:{playlistId:e.playlistId,isFav:e.playlist.isFavorite}}):e._e(),n("share"),e.isDelete?n("el-button",{staticClass:"star",attrs:{circle:"",icon:"el-icon-delete",type:"primary"},on:{click:e.handleDelete}}):e._e()],1)])]):e._e(),n("div",{staticClass:"playlist-body"},[e.toggleForm?n("div",{staticClass:"playlist-body-create"},[n("el-upload",{staticClass:"upload",attrs:{action:"http://symfony.dev.webant.ru","auto-upload":!1,"show-file-list":!1,"on-change":e.handleChangeFile}},[n("el-button",{staticClass:"playlist-body-create-img-addbtn"},[e._v("Загрузить песню")])],1),n("div",{staticClass:"playlist-body-create-right"},[e._m(0),n("el-input",{staticClass:"playlist-body-create-right-name",attrs:{placeholder:"Название песни"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("p",{staticClass:"clear",on:{click:e.clear}},[n("i",{staticClass:"el-icon-close"})])],1),n("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("Добавить в плейлист")])],1):e._e(),n("div",{staticClass:"songs-list"},e._l(e.songsList,function(t){return n("div",{key:t.id,staticClass:"song"},[n("span",[e._v(e._s(t.name))]),n("audio",{attrs:{controls:""}},[n("source",{attrs:{src:"http://symfony.dev.webant.ru/storage/"+t.file,type:"audio/mpeg"}}),e._v("\n          Тег audio не поддерживается вашим браузером. \n        ")])])}),0)]),n("Comments",{attrs:{playlistId:e.playlistId}})],1):e._e()},O=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[n("i",{staticClass:"el-icon-document"})])}],C=n("8dc3"),E=n.n(C),A=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments"},[n("div",{staticClass:"comments-header"},[n("h3",[e._v("Комментарии ("+e._s(e.totalItems)+")")])]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"comments-body"},e._l(e.comments.data,function(e){return n("CommentItem",{key:e.id,attrs:{comment:e}})}),1),n("div",{staticClass:"comments-pag"},[n("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","page-count":e.countOfPages,"current-page":e.currentPage},on:{"current-change":e.handleChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),n("div",{staticClass:"comment"},[n("h3",[e._v("Добавьте комментарий по поводу альбома")]),n("el-input",{staticClass:"textarea",attrs:{type:"textarea",autosize:{minRows:6,maxRows:8},readonly:!e.isLogged,placeholder:e.isLogged?"Оставьте свой комментарий":"Войдите в аккаунт или зарегистрируйтесь, чтобы оставить комментарий"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),e.isLogged?n("div",{staticClass:"comment-footer"},[n("div",{staticClass:"comment-footer-rating"}),n("el-button",{attrs:{type:"submit",disabled:e.isDisabled},on:{click:e.comment}},[e._v("Добавить комментарий")])],1):e._e()],1)])},j=[],R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-body-user"},[n("div",{staticClass:"comments-body-user-header"},[e._m(0),n("div",{staticClass:"comments-body-user-header-info"},[n("p",{staticClass:"comments-body-user-header-info-name"},[e._v("User Name")]),n("p",{staticClass:"comments-body-user-header-info-data"},[e._v(e._s(new Date(e.comment.created_at).toLocaleString()))])])]),n("p",{staticClass:"comments-body-user-comment"},[e._v(e._s(e.comment.comment))])])},I=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-body-user-header-avatar"},[n("i",{staticClass:"el-icon-user"})])}],S={props:["comment"]},$=S,L=Object(_["a"])($,R,I,!1,null,null,null),T=L.exports,D={data:function(){return{totalItems:0,countOfPages:1,currentPage:1,limit:4,loading:!1,textarea:"",playlistId:this.$route.params.playlistId||{},isDisabled:!1}},components:{CommentItem:T},sockets:{connect:function(){var e=this;console.log("Connected"),this.sockets.subscribe("newComment",function(){e.getComments()})},disconnect:function(){console.log("Disconnected")}},mounted:function(){this.getComments()},methods:{getComments:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("comments/getComments",{id:this.playlistId,page:this.currentPage,limit:this.limit});case 3:this.totalItems=this.comments.count,this.countOfPages=Math.ceil(this.totalItems/this.limit),this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),comment:function(){this.$socket.emit("createComment",{playlistId:this.playlistId,comment:this.textarea}),this.textarea="",this.isDisabled=!0,this.getComments(),this.isDisabled=!1},handleChange:function(e){this.currentPage=e,this.getComments()}},computed:{comments:function(){return this.$store.getters["comments/comments"]},isLogged:function(){return this.$store.getters["user/isLogged"]}},watch:{$route:function(){this.currentPage=1,this.getComments()}}},P=D,M=(n("cc29"),Object(_["a"])(P,A,j,!1,null,null,null)),N=M.exports,F=n("490b"),U=n("b775"),V=function(e,t){return Object(U["a"])({url:"/api/".concat(t),method:"post",data:e})},B=function(e,t){return Object(U["a"])({url:"/api/".concat(t),method:"post",data:e})},G=function(){return Object(U["a"])({url:"/api/playlists",method:"get"})},K=function(e,t){return Object(U["a"])({url:"/api/genres",method:"get",params:{limit:e,page:t}})},W=function(e){return Object(U["a"])({url:"/api/genres/".concat(e),method:"get"})},z=function(e){return Object(U["a"])({url:"/api/genres",method:"post",data:e})},q=function(e){return Object(U["a"])({url:"/api/genres/".concat(e),method:"delete"})},J=function(e){var t=e.id,n=e.limit,r=e.page;return Object(U["a"])({url:"/api/songs",method:"get",params:{playlistId:t,limit:n,page:r}})},X=function(e,t){return Object(U["a"])({url:"/api/songs/".concat(e),method:"post",data:t})},H={data:function(){return{imageNotFound:E.a,toggleForm:!1,toggleAdd:!1,playlistId:this.$route.params.playlistId||{},playlist:{},songsList:[],author:"",form:{name:"",file:""},userId:"",rating:null}},components:{share:function(){return n.e("chunk-7b34cbf8").then(n.bind(null,"7d9b"))},like:function(){return n.e("chunk-2d0e48a1").then(n.bind(null,"913f"))},rate:function(){return n.e("chunk-1e6f9180").then(n.bind(null,"1e12"))},Comments:N},created:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=!1,null===this.userInfo){e.next=8;break}return e.next=4,Object(F["d"])(this.playlistId,this.userInfo.id);case 4:t=e.sent,n=!0,e.next=11;break;case 8:return e.next=10,Object(F["d"])(this.playlistId);case 10:t=e.sent;case 11:return this.userId=t.data.user_id,e.next=14,W(t.data.genre_id);case 14:return r=e.sent,e.next=17,J({id:this.playlistId,limit:15,page:1});case 17:if(a=e.sent,n||null===this.userInfo){e.next=24;break}return e.next=21,Object(F["d"])(this.playlistId,this.userInfo.id);case 21:t=e.sent,e.next=25;break;case 24:case 25:this.playlist=t.data,this.author=t.data.user.name,this.rating=null!==t.data.userRating?t.data.rating:null,this.genre=r.data.name,this.songsList=a.data.data;case 30:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleChangeFile:function(e){this.form.file=e,this.form.name=e.name},handleSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,s,i,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.form,n=t.name,r=t.file,n){e.next=4;break}return this.$message.error("Введите название песни"),e.abrupt("return",!1);case 4:if(r.raw){e.next=7;break}return this.$message.error("Добавьте песню"),e.abrupt("return",!1);case 7:return a=new FormData,a.append("file",r.raw),e.next=11,V(a,"audiofiles");case 11:return s=e.sent,e.next=14,B({name:n,filepath:s.data.name},"songs");case 14:return i=e.sent,e.next=17,X(this.playlistId,{songId:i.data.id});case 17:return this.toggleForm=!1,this.clear(),e.next=21,J({id:this.playlistId,limit:15,page:1});case 21:o=e.sent,this.songsList=o.data.data;case 23:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleDelete:function(){var e=this;this.$confirm("Вы точно хотите удалить плейлист? Отменить это действие будет невозможно.","Warning",{confirmButtonText:"Удалить",cancelButtonText:"Закрыть",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(F["a"])(e.playlistId);case 2:throw n=t.sent,500!==n.response.status&&e.$router.push("/my-music"),"Ошибка сервера";case 5:case"end":return t.stop()}},t)}))).catch(function(t){"cancel"===t&&e.$message({type:"info",message:"Вы отменили удаление"})})},clear:function(){this.form={name:"",file:""}}},computed:{isLogged:function(){return this.$store.getters["user/isLogged"]},userInfo:function(){return this.$store.getters["user/userInfo"]},isOwner:function(){return this.isLogged&&this.userInfo.id===this.userId},isDelete:function(){var e=this.$store.getters["user/roles"];return e.includes("ROLE_ADMIN")||e.includes("ROLE_MODER")||this.isOwner}},watch:{$route:function(){this.playlistId=this.$route.params.playlistId}}},Q=H,Y=(n("4503"),Object(_["a"])(Q,k,O,!1,null,null,null)),Z=Y.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"playlist-create"},[n("el-upload",{staticClass:"avatar-uploader",attrs:{action:"http://symfony.dev.webant.ru","auto-upload":!1,"show-file-list":!1,"on-change":e.handleChangeFile}},[e.imageUrl?n("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):n("i",{staticClass:"el-icon-picture-outline avatar-uploader-icon"}),n("el-button",{staticClass:"playlist-create-img-addbtn"},[e._v("Загрузить обложку")])],1),n("div",{staticClass:"playlist-create-right"},[n("el-input",{staticClass:"playlist-create-name",attrs:{placeholder:"Playlist name"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("el-select",{staticClass:"playlist-create-genre",attrs:{id:"test",placeholder:"Genre","no-data-text":"Загрузка..."},on:{"visible-change":e.handleVisibleChange},model:{value:e.form.selectedGenre,callback:function(t){e.$set(e.form,"selectedGenre",t)},expression:"form.selectedGenre"}},e._l(e.genres,function(e){return n("el-option",{key:e.name,attrs:{value:e.id,label:e.name}})}),1),n("el-button",{staticClass:"playlict-create-crbtn",attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("Создать плейлист")])],1)],1)},te=[],ne=n("f730"),re=n.n(ne),ae={data:function(){return{form:{file:{},selectedGenre:"",name:""},imageNotFound:re.a,imageUrl:"",genre:"",genres:[]}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleChangeFile:function(e){this.form.file=e,this.imageUrl=URL.createObjectURL(e.raw)},handleVisibleChange:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,K(15,1);case 3:n=e.sent,this.genres=n.data.data;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n,r,a,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.form,n=t.selectedGenre,r=t.name,a=t.file,a.raw){e.next=4;break}return this.$message.error("Фотография не была добавлена"),e.abrupt("return",!1);case 4:if(r){e.next=7;break}return this.$message.error("Введите имя"),e.abrupt("return",!1);case 7:if(n){e.next=10;break}return this.$message.error("Выберите категорию"),e.abrupt("return",!1);case 10:return s=new FormData,s.append("file",a.raw),e.next=14,V(s,"files");case 14:return i=e.sent,e.next=17,B({name:r,filepath:i.data.name,genreId:n},"playlists");case 17:this.$router.push("/my-music");case 18:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},se=ae,ie=(n("6ff9"),Object(_["a"])(se,ee,te,!1,null,null,null)),oe=ie.exports,ue=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"genre"},[n("h3",[e._v("Жанры")]),n("el-form",{ref:"form",staticClass:"genre-add",attrs:{model:e.form}},[n("el-form-item",[n("el-input",{staticClass:"genre-add-input",attrs:{clearable:""},model:{value:e.form.genre,callback:function(t){e.$set(e.form,"genre",t)},expression:"form.genre"}})],1),n("el-form-item",[n("el-button",{staticClass:"genre-add-btn",attrs:{type:"primary",disabled:e.loadingbtn,loading:e.loadingbtn},on:{click:e.handleSubmit}},[e._v("Добавить новый жанр")])],1)],1),n("div",{staticClass:"list"},e._l(e.genres,function(t){var r=t.id,a=t.name;return n("div",{key:r,staticClass:"list-genre"},[n("p",[e._v(e._s(a)+" "),n("el-button",{staticClass:"mark",attrs:{type:"text",disabled:e.genreLoading},on:{click:function(t){return e.handleClick(t,r)}}},[e._v("Удалить")])],1)])}),0)],1)},ce=[],le={data:function(){return{form:{genre:""},genres:[],loadingbtn:!1,loading:!0,genreLoading:!1}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K(15,1);case 2:t=e.sent,this.genres=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),methods:{handleClick:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t,n){var r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("Вы точно хотите удалить этот жанр?","Warning",{confirmButtonText:"Удалить",cancelButtonText:"Закрыть",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r.genreLoading=!0,e.next=3,q(n);case 3:return e.next=5,K(15,1);case 5:t=e.sent,r.genres=t.data.data,r.genreLoading=!1,r.$message({type:"success",message:"Жанр удален"});case 9:case"end":return e.stop()}},e)}))).catch(function(){r.$message({type:"info",message:"Вы отменили удаление"})});case 1:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}(),handleSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.form.genre,t){e.next=4;break}return this.$message.error("Введите название жанра"),e.abrupt("return",!1);case 4:return this.loadingbtn=!0,e.next=7,z({name:t});case 7:return e.next=9,K(15,1);case 9:n=e.sent,this.genres=n.data.data,this.loadingbtn=!1;case 12:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},de=le,me=(n("90a0"),Object(_["a"])(de,ue,ce,!1,null,null,null)),pe=me.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"users"},[n("h3",[e._v("Пользователи")]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"users-list"},e._l(e.users.data,function(t){return n("user-item",{key:t.id,attrs:{user:t,page:e.currentPage,limit:e.limit}})}),1),n("el-pagination",{staticClass:"pagination",attrs:{background:"",layout:"prev, pager, next","page-count":e.countOfPages,"current-page":e.currentPage},on:{"current-change":e.handleChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)},ge=[],he=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"users-list-user"},[e._m(0),n("div",{staticClass:"users-list-user-info"},[n("p",{staticClass:"users-list-user-info-name"},[e._v("\n      "+e._s(e.user.name)+"\n    ")]),n("p",{staticClass:"users-list-user-info-root"},[e._v(e._s(e.checkRoles(e.user.roles)))])]),n("el-popover",{staticClass:"root",attrs:{placement:"bottom",width:"250",trigger:"click"}},[n("div",{staticClass:"buttons-container"},[e.isModer?n("el-button",{attrs:{disabled:e.loading},on:{click:function(t){return e.lowerRole()}}},[e._v("Понизить до пользователя")]):n("el-button",{attrs:{disabled:e.loading},on:{click:function(t){return e.raiseRole("ROLE_MODER")}}},[e._v("Повысить до модератора")]),n("el-button",{attrs:{disabled:e.loading,type:"danger"},on:{click:e.deleteUserAccount}},[e._v("Удалить аккаунт")])],1),n("el-button",{attrs:{slot:"reference"},slot:"reference"},[e._v("Изменить роль")])],1)],1)},ve=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"users-list-user-avatar"},[n("i",{staticClass:"el-icon-user"})])}],be=n("2612"),ye={data:function(){return{loading:!1}},name:"user-item",props:["user","page","limit"],methods:{checkRoles:function(e){var t="Пользователь";return e.includes("ROLE_ADMIN")?t="Администратор":e.includes("ROLE_MODER")&&(t="Модератор"),t},raiseRole:function(e){var t=["ROLE_USER"];t.push(e),this.askQuestion(t)},lowerRole:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=["ROLE_USER"];e&&t.push(e),this.askQuestion(t)},deleteUserAccount:function(){var e=this;this.$confirm("Вы точно хотите удалить этого пользователя?","Warning",{confirmButtonText:"Удалить",cancelButtonText:"Закрыть",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,Object(be["b"])({userId:e.user.id});case 3:return t.sent,t.next=6,e.$store.dispatch("users/getUsersList",{page:e.page,limit:e.limit,orderColumn:"name",orderType:"asc"});case 6:e.loading=!1,e.$message({type:"success",message:"Пользователь удалён"});case 8:case"end":return t.stop()}},t)}))).catch(function(t){"delete user error"===t&&e.$message({type:"error",message:"Ошибка удаления пользователя"})})},askQuestion:function(e){var t=this;this.$confirm("Вы точно хотите изменить данному пользователю роль?","Warning",{confirmButtonText:"Изменить",cancelButtonText:"Закрыть",type:"warning"}).then(Object(l["a"])(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return t.loading=!0,n.next=3,Object(be["a"])({userId:t.user.id,roles:e});case 3:return n.next=5,t.$store.dispatch("users/getUsersList",{page:t.page,limit:t.limit,orderColumn:"name",orderType:"asc"});case 5:t.loading=!1,t.$message({type:"success",message:"Роль изменена"});case 7:case"end":return n.stop()}},n)}))).catch(function(e){return console.log(e)})}},computed:{isModer:function(){return this.user.roles.includes("ROLE_MODER")}}},_e=ye,we=(n("c173"),Object(_["a"])(_e,he,ve,!1,null,"6cc091e8",null)),xe=we.exports,ke={data:function(){return{loadingbtn:!1,limit:15,totalItems:0,countOfPages:0,currentPage:1,loading:!1}},components:{"user-item":xe},methods:{getUsersList:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.$store.dispatch("users/getUsersList",{page:this.currentPage,limit:this.limit,orderColumn:"name",orderType:"asc"});case 3:this.totalItems=this.users.count,this.countOfPages=Math.ceil(this.totalItems/this.limit),this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleChange:function(e){this.currentPage=e,this.getUsersList()}},created:function(){this.getUsersList()},computed:{users:function(){return this.$store.getters["users/users"]}},watch:{$route:function(){this.currentPage=1,this.getUsersList()}}},Oe=ke,Ce=(n("65af"),Object(_["a"])(Oe,fe,ge,!1,null,null,null)),Ee=Ce.exports,Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home-pages"},[n("div",{staticClass:"tabs"},[n("el-tabs",{attrs:{"text-color":"black"},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"Популярное",name:"popular"}},[n("Popular")],1),n("el-tab-pane",{attrs:{label:"Жанры",name:"genre"}},[n("Genre")],1),n("el-tab-pane",{attrs:{label:"Длительность",name:"duration"}},[n("Duration")],1)],1)],1)])},je=[],Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"popular-playlist"},[n("h3",[e._v("Playlists")]),n("div",{staticClass:"popular"},e._l(e.playlists,function(e){return n("playlistItem",{key:e.id,attrs:{id:e.id,playlist:e}})}),1)])},Ie=[],Se=n("d98d"),$e={data:function(){return{playlists:[],loading:!0}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(F["e"])("desc","rating");case 3:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),components:{playlistItem:Se["a"]},watch:{$route:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["e"])("desc","rating");case 2:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Le=$e,Te=(n("a63b"),Object(_["a"])(Le,Re,Ie,!1,null,null,null)),De=Te.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"genre"},[n("h3",[e._v("Genre")]),n("div",{staticClass:"popular"},e._l(e.playlists,function(e){return n("playlistItem",{key:e.id,attrs:{id:e.id,playlist:e}})}),1)])},Me=[],Ne={data:function(){return{playlists:[],loading:!0}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["e"])("desc","genre_id");case 2:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),components:{playlistItem:Se["a"]},watch:{$route:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["e"])("desc","genre_id");case 2:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},Fe=Ne,Ue=(n("eeb5"),Object(_["a"])(Fe,Pe,Me,!1,null,null,null)),Ve=Ue.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"duration"},[n("h3",[e._v("Duration")]),n("div",{staticClass:"popular"},e._l(e.playlists,function(e){return n("playlistItem",{key:e.id,attrs:{id:e.id,playlist:e}})}),1)])},Ge=[],Ke={data:function(){return{playlists:[],loading:!0}},mounted:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["e"])("desc","song_count");case 2:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),components:{playlistItem:Se["a"]},watch:{$route:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(F["e"])("desc","song_count");case 2:t=e.sent,this.playlists=t.data.data,this.loading=!1;case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},We=Ke,ze=(n("36de"),Object(_["a"])(We,Be,Ge,!1,null,null,null)),qe=ze.exports,Je={data:function(){return{activeName:"popular"}},components:{Popular:De,Genre:Ve,Duration:qe}},Xe=Je,He=(n("b39b"),Object(_["a"])(Xe,Ae,je,!1,null,"768fe68b",null)),Qe=He.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"not-found"},[e._m(0),n("p",{staticClass:"msg"},[e._v("Страница не найдена!")]),n("div",{staticClass:"back",attrs:{router:!0}},[n("router-link",{staticClass:"back",attrs:{to:"/"}},[e._v("Вернуться на главную")])],1)])},Ze=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"err"},[r("p",{staticClass:"num"},[e._v("4")]),r("img",{attrs:{src:n("cf05"),alt:""}}),r("p",{staticClass:"num"},[e._v("4")])])}],et={},tt=et,nt=(n("b47b"),Object(_["a"])(tt,Ye,Ze,!1,null,null,null)),rt=nt.exports;r["default"].use(f["a"]);var at=[{path:"/",component:Qe,name:"home",meta:{title:"Главная",menuKey:"home"}},{path:"/my-music",name:"my-music",component:x,meta:{title:"Моя музыка",menuKey:"playlists"},children:[{path:"/my-music/create",component:oe},{path:"/my-music/:playlistId",component:Z,meta:{title:"Playlist"}}]},{path:"/genres",component:pe,name:"genres",meta:{title:"Создать жанр",menuKey:"genres"}},{path:"/users-list",component:Ee},{path:"/404",name:"404",component:rt},{path:"*",redirect:"/404"}],st=new f["a"]({routes:at});st.beforeEach(function(e,t,n){var r=e.matched[0]&&e.matched[0].path;console.log(e.path),("/my-music/create"!==e.path||g["a"].state.user.isLogged)&&("/"===e.path||"/my-music"===r||g["a"].state.user.isLogged)&&("/genres"!==e.path||g["a"].state.user.roles.includes("ROLE_ADMIN"))&&("/users-list"!==e.path||g["a"].state.user.roles.includes("ROLE_ADMIN"))?n():n({path:t.path})});var it=st,ot=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("modal",{attrs:{name:"LoginModal",scrollable:"",classes:"modal",width:"500px",height:"auto"}},[n("div",{staticClass:"modal__body",staticStyle:{background:"#fff !important",padding:"30px"}},[n("h3",[n("mark",[e._v("My")]),e._v("TopMusic")]),n("p",[e._v("Войти в свой аккаунт")]),n("el-form",{attrs:{model:e.loginData}},[n("el-form-item",{attrs:{required:"",label:"Почта"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[n("el-input",{staticClass:"input",model:{value:e.loginData.email,callback:function(t){e.$set(e.loginData,"email",t)},expression:"loginData.email"}})],1),n("el-form-item",{attrs:{required:"",label:"Пароль"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[n("el-input",{staticClass:"input",attrs:{"show-password":""},model:{value:e.loginData.password,callback:function(t){e.$set(e.loginData,"password",t)},expression:"loginData.password"}})],1),n("el-button",{staticClass:"login",attrs:{type:"submit"},on:{click:e.login}},[e._v("Войти")])],1)],1)])],1)},ut=[],ct=n("5f87"),lt={data:function(){return{loginData:{email:"",password:""}}},methods:{login:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$store.dispatch("user/loginByUsername",this.loginData);case 2:return e.next=4,this.$store.dispatch("user/getCurrent");case 4:this.$socket.io.uri="".concat(this.$socket.io.uri,"?auth=Bearer ").concat(Object(ct["a"])()),this.$socket.connect(),this.$modal.hide("LoginModal");case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),test:function(){console.log(this.$socket.io)}}},dt=lt,mt=(n("5a57"),Object(_["a"])(dt,ot,ut,!1,null,null,null)),pt=mt.exports,ft=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("modal",{attrs:{name:"RegistrationModal",scrollable:"",classes:"modal",width:"500px",height:"auto"}},[n("div",{staticClass:"modal__body",staticStyle:{background:"#fff !important",padding:"30px"}},[n("h3",[n("mark",[e._v("My")]),e._v("TopMusic")]),n("p",[e._v("Зарегистрироваться на сайте")]),n("el-form",{ref:"registerForm",attrs:{model:e.registerData}},[n("el-form-item",{staticClass:"label",attrs:{label:"Имя"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("registerForm")}}},[n("el-input",{staticClass:"input",model:{value:e.registerData.name,callback:function(t){e.$set(e.registerData,"name",t)},expression:"registerData.name"}})],1),n("el-form-item",{staticClass:"label",attrs:{label:"Почта"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("registerForm")}}},[n("el-input",{staticClass:"input",attrs:{type:"email"},model:{value:e.registerData.email,callback:function(t){e.$set(e.registerData,"email",t)},expression:"registerData.email"}})],1),n("el-form-item",{staticClass:"label",attrs:{label:"Пароль"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("registerForm")}}},[n("el-input",{staticClass:"input",attrs:{"show-password":""},model:{value:e.registerData.password,callback:function(t){e.$set(e.registerData,"password",t)},expression:"registerData.password"}})],1),n("el-form-item",{staticClass:"label",attrs:{label:"Повторите пароль"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("registerForm")}}},[n("el-input",{staticClass:"input",attrs:{"show-password":""},model:{value:e.registerData.c_password,callback:function(t){e.$set(e.registerData,"c_password",t)},expression:"registerData.c_password"}})],1)],1),n("el-button",{staticClass:"btn-reg",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("registerForm")}}},[e._v("Зарегистрироваться")])],1)])],1)},gt=[],ht={data:function(){return{registerData:{name:"",email:"",password:"",c_password:""}}},methods:{submitForm:function(e){var t=this,n=this.registerData,r=n.name,a=n.email,s=n.password,i=n.c_password,o=/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$/,u=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;this.$refs[e].validate(function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(u.test(a)){e.next=3;break}return t.$message.error("Неправильно введён Email"),e.abrupt("return");case 3:if(o.test(s)){e.next=6;break}return t.$message.error("Неправильно введён пароль. Пароль должен содержать заглавную букву, цифру и спецсимвол, длина не менее 6 символов"),e.abrupt("return");case 6:if(!(n&&r&&a&&s&&i)){e.next=18;break}if(s!==i){e.next=14;break}return e.next=10,t.$store.dispatch("user/signUp",t.registerData);case 10:t.$router.push("/"),t.$modal.hide("RegistrationModal"),e.next=16;break;case 14:return t.$message.error("Пароли не совпадают"),e.abrupt("return",!1);case 16:e.next=20;break;case 18:return t.$message.error("Заполнены не все поля"),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}},vt=ht,bt=(n("02f6"),Object(_["a"])(vt,ft,gt,!1,null,"64f680fa",null)),yt=bt.exports,_t={components:{LoginModal:pt,RegistationModal:yt},data:function(){return{headerItems:Object(p["a"])(at),activeIndex:""}},mounted:function(){var e=this;this.activeIndex=this.$router.currentRoute.meta?this.$router.currentRoute.meta.menuKey:"",this.$router.beforeEach(function(t,n,r){e.activeIndex=t.meta?t.meta.menuKey:"",r()})},methods:{handleClick:function(){var e=this;this.$confirm("Вы уверены, что хотите выйти?","Warning",{confirmButtonText:"Выйти",cancelButtonText:"Закрыть",type:"warning"}).then(function(){e.$store.dispatch("user/userLogout"),e.$router.push("/"),e.$message({type:"success",message:"Вы вышли из аккаунта"})}).catch(function(e){console.log(e)})}},computed:{userName:function(){var e=this.$store.getters["user/userInfo"];return e?e.name:"username"},isAdmin:function(){return this.$store.getters["user/isAdmin"]},isLogged:function(){return this.$store.getters["user/isLogged"]}}},wt=_t,xt=(n("4218"),Object(_["a"])(wt,d,m,!1,null,"62201fda",null)),kt=xt.exports,Ot={components:{NavComponent:kt},beforeMount:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=Object(ct["a"])(),!t){e.next=5;break}return this.$store.dispatch("user/setTokenToStore",{token:t}),e.next=5,this.$store.dispatch("user/getCurrent");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},Ct=Ot,Et=(n("0978"),Object(_["a"])(Ct,u,c,!1,null,null,null)),At=Et.exports,jt=n("1881"),Rt=n.n(jt);n("0fae"),n("dac4");r["default"].use(o.a),r["default"].use(Rt.a),r["default"].use(new s.a({debug:!1,connection:"http://109.196.164.214:3000",vuex:{store:g["a"],actionPrefix:"SOCKET_",mutationPrefix:"SOCKET_"},options:{query:{auth:"Bearer ".concat(Object(ct["a"])())}}})),r["default"].config.productionTip=!1,new r["default"]({router:it,store:g["a"],render:function(e){return e(At)}}).$mount("#app")},"56dc":function(e,t,n){},"5a57":function(e,t,n){"use strict";var r=n("bf04"),a=n.n(r);a.a},"5f87":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return s}),n.d(t,"b",function(){return i});var r="refresh-token",a=function(){return localStorage.getItem(r)},s=function(e){var t=e.token;localStorage.setItem(r,t)},i=function(){localStorage.removeItem(r)}},"65af":function(e,t,n){"use strict";var r=n("0475"),a=n.n(r);a.a},"682e":function(e,t,n){},"6d1b":function(e,t,n){},"6ff9":function(e,t,n){"use strict";var r=n("4564"),a=n.n(r);a.a},"8d72":function(e,t,n){},"8dc3":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOEAAADhCAMAAAAJbSJIAAAAOVBMVEXz9Pa5vsq2u8jN0dnV2N/o6u7w8fTi5OnFydO+ws3f4ee6v8vY2+H29/jy9Pbu7/LJztbCx9HR1ty/NMEIAAAC8ElEQVR4nO3b67ZrMBiFYaSh1HHd/8XuFap1SFolXb7s8T4/18EwOyNCiSIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACryrezAy2kulR+lVl6dqip7Jr412Zyeizj7yjODjYqvhRQTMQm/1rC/OxsvapIht3xehDeN1lIOBSrtt+ZW+t1Kh02GrciEvaDNLl4Ph1e+hqvEk4Z94SZ580WchJGJNyHhH/JlrDR+uC+iU6Yqf7c2JXNga0KTlj/xOP5ujuwdpabML0mz1VXUu7eqtyEP5OAvysdvXerYhMWs4C/a+e9uyg1YXVdXh7sXTtLTagXFcaJ2rlVqQmXgzSOu5f76J5shSasylXC/NVJUbknW6kJLx8lNPNu6WhRaMKPRmmtzB+7WpSasNk+09TjmdPeotSEVbfs0HW7LFXjh2FvUWrC1Z1F1yCt1aRtW4tiE0ZqPk4dp4NUzYaypUW5CaNuGtExjdSLz8HSouCEjRqvnuLcceE/b9D+UQhOGFWZys093e7S2IfoqkFbi5ITRv1NDN24ds7SoKVF4QlfsTa4bjHchOmPI+AiYrgJXQ0uB2qoCWt3g4sWQ034qsF5i4EkbBY3ol43OGsxjIT6luvp7NG+DfhsMYSElc7jpHteAL85BhcthpBQ38zPny1uadD8x3C9JT+habD/RXdfu21rsP822fy5/IR9g/GjxXpjg+ZSKoiEY4OPFrc2GEzCR4O9XL87D4aWcNrgEHFzvkASzhv8UAAJVw3+dwkPNRhAwoMNBpDwYIPiEx5uUHzCww1KT1htX7qEmnD9/SEJSXhutgEJSUjC8/lOKPs+jfla7ajh/qPUhP6Q8C+RcJdKUML7W0HK75vA9+/hrmenM8bHgr/y7pqS8O7a43nEb7x/6Pvo3iddPa3njYx3SKMoO37rwu4mo8LIPJB4fLG2lggZoz3d5l6PQuPWahHTzEgXF79KQQUCAAAAAAAAAAAAAAAAAAAAAAAAAAAAp/gHLTI30QIHnooAAAAASUVORK5CYII="},"90a0":function(e,t,n){"use strict";var r=n("6d1b"),a=n.n(r);a.a},9224:function(e){e.exports={a:"0.23.2"}},"9a08":function(e,t,n){"use strict";var r=n("682e"),a=n.n(r);a.a},"9b87":function(e,t,n){"use strict";var r=n("cf4a"),a=n.n(r);a.a},a63b:function(e,t,n){"use strict";var r=n("1afa"),a=n.n(r);a.a},a8ab:function(e,t,n){},b39b:function(e,t,n){"use strict";var r=n("4e9b"),a=n.n(r);a.a},b47b:function(e,t,n){"use strict";var r=n("56dc"),a=n.n(r);a.a},b775:function(e,t,n){"use strict";var r=n("cebc"),a=(n("96cf"),n("3b8d")),s=n("795b"),i=n.n(s),o=(n("cadf"),n("551c"),n("f751"),n("097d"),n("bc3a")),u=n.n(o),c=n("5c96"),l=n("4360"),d=n("5f87"),m={accept:"application/json"},p=u.a.create({baseURL:"http://symfony.dev.webant.ru"}),f=function(e){return new i.a(function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(n,a){var s,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=Object(r["a"])({},e),t.prev=1,t.next=4,p(s);case 4:i=t.sent,n(i),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),a(t.t0);case 11:case"end":return t.stop()}},t,null,[[1,8]])}));return function(e,n){return t.apply(this,arguments)}}())};p.interceptors.request.use(function(e){e.headers=Object(r["a"])({},m);var t=l["a"].getters["user/token"]||Object(d["a"])();return t&&(e.headers["Authorization"]="Bearer ".concat(t)),e},function(e){return i.a.reject(e)}),p.interceptors.response.use(function(e){return e},function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.response&&401===t.response.status&&(t.response&&t.response.data&&t.response.data.error.password?c["Message"].error("Неправильно введён пароль."):t.response&&t.response.data&&t.response.data.error.email?c["Message"].error("Пользователь с такой почтой уже существует."):c["Message"].error("Пожалуйста, пройдите авторизацию.")),!t.response||403!==t.response.status){e.next=4;break}return c["Message"].error("Доступ запрещён"),e.abrupt("return",t);case 4:if(!t.response||500!==t.response.status){e.next=7;break}return c["Message"].error("Упс, с сервером что-то не так, повторите попытку позже"),e.abrupt("return",t);case 7:return e.abrupt("return",new i.a(function(e,n){n(t)}));case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());t["a"]=f},bf04:function(e,t,n){},c173:function(e,t,n){"use strict";var r=n("1718"),a=n.n(r);a.a},ca38:function(e,t,n){},cb01:function(e,t,n){},cc29:function(e,t,n){"use strict";var r=n("cb01"),a=n.n(r);a.a},cf05:function(e,t,n){e.exports=n.p+"img/logo.f90fbd63.png"},cf4a:function(e,t,n){},d98d:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{on:{click:function(t){return e.$router.push("/my-music/"+e.playlist.id)}}},[n("div",{staticClass:"playlist",style:{"background-image":"url(http://symfony.dev.webant.ru/storage/"+e.playlist.image+")"}}),n("span",{staticClass:"playlist-name"},[e._v(e._s(e.playlist.name))])])},a=[],s={data:function(){return{togglePlus:!1}},props:{playlist:{default:{}}}},i=s,o=(n("9b87"),n("2877")),u=Object(o["a"])(i,r,a,!1,null,"22052b5a",null);t["a"]=u.exports},eeb5:function(e,t,n){"use strict";var r=n("f2b7"),a=n.n(r);a.a},f2b7:function(e,t,n){},f730:function(e,t,n){e.exports=n.p+"img/notImage.6ecb7d22.jpg"}});
//# sourceMappingURL=app.8da21f33.js.map